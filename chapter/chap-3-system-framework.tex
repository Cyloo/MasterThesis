\chapter{架构设计}
\label{chap:system-framework}
当系统需求和输入输出明确以后，首先要做的就是系统的架构设计，一个好的架构设计能让系统层次简明，易于理解，各构件各司其职，从而有效提高系统的效率、稳定性、安全性、扩展性和可维护性。

\section{主体设计}
从之前的需求分析来看，医学档案自动生成与归档系统从输入图片数据，到最终输出的文档数据，需经过若干个数据处理加工步骤，这些步骤之间是顺序依次执行的，并且模块之间没有向前的反馈关系，即模块间以线性展开，没有环路，这天然构成了系统架构设计中的管道模式（Pipeline Pattern），或称过滤器模式（Filter Pattern）。管道/过滤器模式的软件架构，是系统架构中的一种非常常见的形式，每个构件都有一组输入输出，构件读输入的数据流，经过内部处理，然后产生输出数据流。这个过程通常通过对输入流的变换及增量计算来完成，所以在输入被完全消费之前，输出便产生了。管道/过滤器系统架构具有以下优点：
\begin{itemize}
	\item 允许设计者将整个系统的输入/输出行为看成是多个过滤器的行为的简单合成；
	\item 系统维护和增强系统性能简单。新的过滤器可以添加到现有系统中来；旧的可以被改进的过滤器替换掉；
	\item 允许对一些如吞吐量、死锁等属性的分析；
	\item 支持并行执行。每个过滤器是作为一个单独的任务完成，因此可与其它任务并行执行。
\end{itemize}
%这几句摘自http://blog.csdn.net/lizhengnanhua/article/details/14640489
具体到本系统来说，基于管道式的架构设计思想，我们可以将整个系统分成若干个处理模块，一组数据流将这些处理模块串联起来，数据流以每个病人的病历数据为单位，从输入口经过一系列加工处理，得到最终的输出，各个病人病历之间互不干扰，犹如生产线一般严格产出。
确定了采用管道式的系统架构后，接下来我们可以结合问题需求，按照数据流的顺序，一步步设计管道中的构件（模块），首先，我们需将输入的图片数据作为数据流的开端，逐一分析与设计。

\section{数据加载模块}

